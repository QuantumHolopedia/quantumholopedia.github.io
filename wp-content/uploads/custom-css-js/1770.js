/******* Do not edit this file *******
Simple Custom CSS and JS - by Silkypress.com
Saved: Jan 24 2019 | 22:45:29 */
/* Default comment here */ 

var myList=
[
  {"Element" : "<sup>1</sup>H", "MHz / T" : 42.57747892},
  {"Element" : "<sup>2</sup>H", "MHz / T" : 6.536},
  {"Element" : "<sup>3</sup>He", "MHz / T" : -32.434},
  {"Element" : "<sup>7</sup>Li", "MHz / T" : 16.546},
  {"Element" : "<sup>13</sup>C", "MHz / T" : 10.7084},
  {"Element" : "<sup>14</sup>N", "MHz / T" : 3.077},
  {"Element" : "<sup>15</sup>N", "MHz / T" : -4.316},
  {"Element" : "<sup>17</sup>O", "MHz / T" : -5.772},
  {"Element" : "<sup>19</sup>F", "MHz / T" : 40.052},
  {"Element" : "<sup>23</sup>Na", "MHz / T" : 11.262},
  {"Element" : "<sup>27</sup>Al", "MHz / T" : 11.103},
  {"Element" : "<sup>29</sup>Si", "MHz / T" : -8.465},
  {"Element" : "<sup>31</sup>P", "MHz / T" : 17.235},
  {"Element" : "<sup>57</sup>Fe", "MHz / T" : 1.382},
  {"Element" : "<sup>63</sup>Cu", "MHz / T" : 11.319},
  {"Element" : "<sup>67</sup>Zn", "MHz / T" : 2.669},
];
            
jQuery(document).ready(function( $ ){
  buildHtmlTable();
  
  $(".fieldValueButton").click(function() {
  $("#excelDataTable").html("");
  	buildHtmlTable();
  });
  



// Builds the HTML Table out of myList json data from Ivy restful service.
 function buildHtmlTable() {
     var columns = addAllColumnHeaders(myList);
     var magneticFieldValue = $(".fieldValue").val();
     console.log(magneticFieldValue);
    		
 
     for (var i = 0 ; i < myList.length ; i++) {
         var row$ = $('<tr/>');
         var cellValue;
         for (var colIndex = 0 ; colIndex < columns.length ; colIndex++) {
             cellValue = myList[i][columns[colIndex]];
 
             if (cellValue == null) { cellValue = ""; }
 
             row$.append($('<td/>').html(cellValue));
         }
         
         var calculatedValue = (cellValue * magneticFieldValue).toLocaleString('en-US', {
            maximumFractionDigits: 10
        });
         
          row$.append($('<td/>').html(calculatedValue));
         
         $("#excelDataTable").append(row$);
     }
 }
 
 // Adds a header row to the table and returns the set of columns.
 // Need to do union of keys from all records as some records may not contain
 // all records
 function addAllColumnHeaders(myList)
 {
     var columnSet = [];
     var headerTr$ = $('<tr/>');
     var magneticFieldValue = $(".fieldValue").val();
 
     for (var i = 0 ; i < myList.length ; i++) {
         var rowHash = myList[i];
         for (var key in rowHash) {
         
             if ($.inArray(key, columnSet) == -1){
             
                 columnSet.push(key);
                 headerTr$.append($('<th/>').html(key));
             }
         }
     }
     
   	headerTr$.append($('<th/>').html("MHz at " + magneticFieldValue + " T"));
     $("#excelDataTable").append(headerTr$);
 
     return columnSet;
 }
  
});